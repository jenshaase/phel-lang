(ns phel\test\core\basic-constructors
  (:require phel\test :refer [deftest is-equals]))

# ------------------
# Basic constructors
# ------------------

(deftest create-set
  (is-equals (set 1 2 3 :a :b :c) (set :a 1 2 :b 3 :c :c 1 2 3) "construct set"))

(deftest create-keyword
  (is-equals :a (keyword "a") "construct keyword"))

(deftest create-tuple
  (is-equals '(1 2 3) (tuple '1 '2 '3) "construct tuple")
  (is-equals '[1 2 3] (tuple-brackets '1 '2 '3) "construct bracket tuple"))

(deftest create-array
  (is-equals @[1 2 3] (array 1 2 3) "construct array"))

(deftest create-table
  (is-equals @{:a 1 :b 2} (table :a 1 :b 2) "construct table"))

(deftest create-php-indexed-array
  (let [arr (php-indexed-array "a" "b")]
    (is-equals "a" (php/aget arr 0) "php-indexed-array: first key")
    (is-equals "b" (php/aget arr 1) "php-indexed-array: second key")))

(deftest create-php-associative-array
  (let [arr (php-associative-array "a" 1 "b" 2)]
    (is-equals 1 (php/aget arr "a") "php-associative-array: first key")
    (is-equals 2 (php/aget arr "b") "php-associative-array: second key")))
