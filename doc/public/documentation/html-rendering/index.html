<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>HTML Rendering | The Phel Language </title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The offical website of the Phel language. Phel is a functional programming language that compiles to PHP.">

  <link rel="stylesheet" href="https:&#x2F;&#x2F;phel-lang.org&#x2F;site.css"/>
  <link rel="alternate icon" type="image/png" href="/favicon-32.png">

  <meta property="og:description" content="The offical website of the Phel language. Phel is a functional programming language that compiles to PHP." />
  <meta property="og:title" content="The Phel Language" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://phel-lang.org/" />
  <meta property="og:image" content="https://phel-lang.org/favicon-512.png" />
  <meta property="og:image:width" content="512" />
  <meta property="og:image:height" content="512" />
</head>

<body>
  
<div class="documentation">
    <aside class="documentation__sidebar">
        <div class="logo">
            <a href="/">
    <svg class="phel-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200.3 167.7"><path d="M6 66l95 96h36V93l-36-74H42L6 56v106h36l24-35"/><path d="M137 93l58-3-12-58-32-26h-34l-16 13-23 9-12 22 46 52z"/><path d="M195 90l-12 57h-13l-2-56M170 147l-13-11h12"/></svg>
</a>
        </div>

        <input type="checkbox" id="menu_checkbox">
        <label for="menu_checkbox">
            <svg viewBox="0 0 32 32">
                <path d="M3,3 29,3 M3,16 29,16 M3,29 29,29"></path>
            </svg>
            Menu
        </label>
        <nav>
            <ol>
                <li class="">
                    <a href="/">About Phel</a>
                </li>
                
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;getting-started&#x2F;">Getting started</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;basic-types&#x2F;">Basic Types</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;numbers-and-arithmetic&#x2F;">Numbers and Arithmetic</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;truth-and-boolean-operations&#x2F;">Truth and Boolean operations</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;control-flow&#x2F;">Control flow</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;global-and-local-bindings&#x2F;">Global and local bindings</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;functions-and-recursion&#x2F;">Functions and Recursion</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;tuple&#x2F;">Tuple</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;array-table-and-struct&#x2F;">Array, Table, Struct and Set</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;destructuring&#x2F;">Destructuring</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;macros&#x2F;">Macros</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;namespaces&#x2F;">Namespaces</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;php-interop&#x2F;">PHP Interop</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;http-request-and-response&#x2F;">Request and Response</a>
                    </li>
                
                    <li class="active">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;html-rendering&#x2F;">HTML Rendering</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;testing&#x2F;">Testing</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;configuration&#x2F;">Configuration</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;repl&#x2F;">REPL</a>
                    </li>
                
                    <li class="">
                        <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;documentation&#x2F;api&#x2F;">API</a>
                    </li>
                
            </ol>

            <ul>
                <li><a href="https://github.com/phel-lang/phel-lang">Source on Github</a></li>
            </ul>
        </nav>
    </aside>
    <div class="documentation__content">
        
    <h1>HTML Rendering</h1>
    <p>Phel offers a template syntax based on Phel's data structures. It uses tuples to represent elements and tables for element's attributes. All values are automatically escaped to provide better defense against cross-site scripting (XSS).</p>
<h2 id="syntax">Syntax</h2>
<p>The <code>html</code> function in the module <code>phel\http</code> is the main function to generate HTML. See the following example:</p>
<pre style="background-color:#ffffff;">
<code><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">ns</span><span style="color:#4d4d4c;"> my-namespace
  (</span><span style="color:#3e999f;">:require</span><span style="color:#4d4d4c;"> phel\html </span><span style="color:#3e999f;">:refer </span><span style="color:#4d4d4c;">[html]))

(html [</span><span style="color:#3e999f;">:span </span><span style="color:#4d4d4c;">@{</span><span style="color:#3e999f;">:class </span><span style="color:#718c00;">&quot;foo&quot;</span><span style="color:#4d4d4c;">} </span><span style="color:#718c00;">&quot;bar&quot;</span><span style="color:#4d4d4c;">])
</span><span style="color:#999999;"># Evaluates to &lt;span class=&quot;foo&quot;&gt;bar&lt;/span&gt;
</span></code></pre>
<p>The data structure that is accepted by <code>html</code> takes one of the following forms</p>
<pre style="background-color:#ffffff;">
<code><span style="color:#4d4d4c;">[tag body+]
[tag attributes body+]
</span></code></pre>
<p>The first item is in the tuple is a mandatory tag name. It can be either a keyword or a string. The second item may be an optional table of attributes. All subsequent items in the tuple are treated as the element body. This can include strings, nested tuples or arrays.</p>
<pre style="background-color:#ffffff;">
<code><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:div</span><span style="color:#4d4d4c;">]) </span><span style="color:#999999;"># Evaluates to &quot;&lt;div&gt;&lt;/div&gt;&quot;
</span><span style="color:#4d4d4c;">(html [</span><span style="color:#718c00;">&quot;div&quot;</span><span style="color:#4d4d4c;">]) </span><span style="color:#999999;"># Evaluates to &quot;&lt;div&gt;&lt;/div&gt;&quot;
</span><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:text </span><span style="color:#718c00;">&quot;Lorem Ipsum&quot;</span><span style="color:#4d4d4c;">]) </span><span style="color:#999999;"># Evaluates to &quot;&lt;text&gt;Lorem Ipsum&lt;/text&gt;&quot;
</span><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:body </span><span style="color:#4d4d4c;">[</span><span style="color:#3e999f;">:p</span><span style="color:#4d4d4c;">] [</span><span style="color:#3e999f;">:br</span><span style="color:#4d4d4c;">]]) </span><span style="color:#999999;"># Evaluates to &quot;&lt;body&gt;&lt;p&gt;&lt;/p&gt;&lt;br /&gt;&lt;/body&gt;&quot;
</span><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:div </span><span style="color:#4d4d4c;">@{</span><span style="color:#3e999f;">:id </span><span style="color:#718c00;">&quot;foo&quot;</span><span style="color:#4d4d4c;">}]) </span><span style="color:#999999;"># Evaluates to &quot;&lt;div id=\&quot;foo\&quot;&gt;&lt;/div&gt;&quot;
</span></code></pre><h2 id="clases-and-styles">Clases and Styles</h2>
<p>A common need in building html templates is to adjust element's class list and its inline styles. Therefore, Phel provides special enhancements for <code>class</code> and <code>style</code> attributes.</p>
<p>Instead of concatenation a inline style string, a table can be used. The next two examples evaluate to the same result.</p>
<pre style="background-color:#ffffff;">
<code><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:div </span><span style="color:#4d4d4c;">@{</span><span style="color:#3e999f;">:style </span><span style="color:#718c00;">&quot;background:green;color:red;&quot;</span><span style="color:#4d4d4c;">} </span><span style="color:#718c00;">&quot;bar&quot;</span><span style="color:#4d4d4c;">])
(html [</span><span style="color:#3e999f;">:div </span><span style="color:#4d4d4c;">@{</span><span style="color:#3e999f;">:style </span><span style="color:#4d4d4c;">@{</span><span style="color:#3e999f;">:background </span><span style="color:#718c00;">&quot;green&quot; </span><span style="color:#3e999f;">:color </span><span style="color:#718c00;">&quot;red&quot;</span><span style="color:#4d4d4c;">}} </span><span style="color:#718c00;">&quot;bar&quot;</span><span style="color:#4d4d4c;">])
</span><span style="color:#999999;"># Both evaluate to 
# &quot;&lt;div style=\&quot;background:green;color:red;\&quot;&gt;bar&lt;/div&gt;&quot;
</span></code></pre>
<p>Class lists can be build by tuples, arrays or tables. If a table is provided the keys of the tables are the class names and the values are evaluated to true or false. Only keys with true values are added to the final class list.</p>
<pre style="background-color:#ffffff;">
<code><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:div </span><span style="color:#4d4d4c;">@{</span><span style="color:#3e999f;">:class </span><span style="color:#4d4d4c;">[</span><span style="color:#3e999f;">:a</span><span style="color:#4d4d4c;">]}]) </span><span style="color:#999999;"># &lt;div class=\&quot;a\&quot;&gt;&lt;/div&gt;
</span><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:div </span><span style="color:#4d4d4c;">@{</span><span style="color:#3e999f;">:class </span><span style="color:#4d4d4c;">[</span><span style="color:#3e999f;">:a </span><span style="color:#718c00;">&quot;b&quot;</span><span style="color:#4d4d4c;">]}]) </span><span style="color:#999999;"># &lt;div class=\&quot;a b\&quot;&gt;&lt;/div&gt;
</span><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:div </span><span style="color:#4d4d4c;">@{</span><span style="color:#3e999f;">:class </span><span style="color:#4d4d4c;">@[</span><span style="color:#3e999f;">:a </span><span style="color:#718c00;">&quot;b&quot;</span><span style="color:#4d4d4c;">]}]) </span><span style="color:#999999;"># &lt;div class=\&quot;a b\&quot;&gt;&lt;/div&gt;
</span><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:div </span><span style="color:#4d4d4c;">@{</span><span style="color:#3e999f;">:class </span><span style="color:#4d4d4c;">@{</span><span style="color:#3e999f;">:a </span><span style="color:#f5871f;">true </span><span style="color:#3e999f;">:b </span><span style="color:#f5871f;">false</span><span style="color:#4d4d4c;">}}]) </span><span style="color:#999999;"># &lt;div class=\&quot;a\&quot;&gt;&lt;/div&gt;
</span></code></pre><h2 id="conditional-rendering">Conditional rendering</h2>
<p>To conditional render parts of the html the <code>if</code> expression can be used.</p>
<pre style="background-color:#ffffff;">
<code><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:div </span><span style="color:#4d4d4c;">[</span><span style="color:#3e999f;">:p </span><span style="color:#718c00;">&quot;a&quot;</span><span style="color:#4d4d4c;">] (</span><span style="color:#8959a8;">if </span><span style="color:#f5871f;">true </span><span style="color:#4d4d4c;">[</span><span style="color:#3e999f;">:p </span><span style="color:#718c00;">&quot;b&quot;</span><span style="color:#4d4d4c;">] [</span><span style="color:#3e999f;">:p </span><span style="color:#718c00;">&quot;c&quot;</span><span style="color:#4d4d4c;">])])
</span><span style="color:#999999;"># Evaluates to &quot;&lt;div&gt;&lt;p&gt;a&lt;/p&gt;&lt;p&gt;b&lt;/p&gt;&lt;/div&gt;&quot;
</span><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:div </span><span style="color:#4d4d4c;">[</span><span style="color:#3e999f;">:p </span><span style="color:#718c00;">&quot;a&quot;</span><span style="color:#4d4d4c;">] (</span><span style="color:#8959a8;">if </span><span style="color:#f5871f;">false </span><span style="color:#4d4d4c;">[</span><span style="color:#3e999f;">:p </span><span style="color:#718c00;">&quot;b&quot;</span><span style="color:#4d4d4c;">] [</span><span style="color:#3e999f;">:p </span><span style="color:#718c00;">&quot;c&quot;</span><span style="color:#4d4d4c;">])])
</span><span style="color:#999999;"># Evaluates to &quot;&lt;div&gt;&lt;p&gt;a&lt;/p&gt;&lt;p&gt;c&lt;/p&gt;&lt;/div&gt;&quot;
</span></code></pre><h2 id="list-rendering">List rendering</h2>
<p>Similar to conditional rendering the <code>for</code> expression can be used to render lists.</p>
<pre style="background-color:#ffffff;">
<code><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:ul </span><span style="color:#4d4d4c;">(</span><span style="color:#8959a8;">for </span><span style="color:#4d4d4c;">[i </span><span style="color:#3e999f;">:range </span><span style="color:#4d4d4c;">[</span><span style="color:#f5871f;">0 3</span><span style="color:#4d4d4c;">]] [</span><span style="color:#3e999f;">:li</span><span style="color:#4d4d4c;"> i])])
</span><span style="color:#999999;"># Evaluates to &quot;&lt;ul&gt;&lt;li&gt;0&lt;/li&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;2&lt;/li&gt;&lt;/ul&gt;&quot;
</span></code></pre><h2 id="raw-html">Raw Html</h2>
<p>By default all values are automatically escaped to provide better defense against cross-site scripting (XSS). In order to output real HTML the <code>raw-string</code> function can be used.</p>
<pre style="background-color:#ffffff;">
<code><span style="color:#4d4d4c;">(html [</span><span style="color:#3e999f;">:span </span><span style="color:#4d4d4c;">(raw-string </span><span style="color:#718c00;">&quot;&lt;a&gt;&lt;/a&gt;&quot;</span><span style="color:#4d4d4c;">)])
</span><span style="color:#999999;"># Evaluates to &quot;&lt;span&gt;&lt;a&gt;&lt;/a&gt;&lt;/span&gt;&quot;
</span></code></pre><h2 id="doctypes">Doctypes</h2>
<p>To add a doctype at the beginning of each element document the <code>doctype</code> function can be used.</p>
<pre style="background-color:#ffffff;">
<code><span style="color:#4d4d4c;">(html (doctype </span><span style="color:#3e999f;">:html5</span><span style="color:#4d4d4c;">) [</span><span style="color:#3e999f;">:div</span><span style="color:#4d4d4c;">])
</span><span style="color:#999999;"># Evaluates to &quot;&lt;!DOCTYPE html&gt;\n&lt;div&gt;&lt;/div&gt;&quot;
</span></code></pre>
<p>The <code>doctype</code> function supports the following values: <code>:html5</code>, <code>:xhtml-transitional</code>, <code>:xhtml-strict</code> and <code>:html4</code>.</p>



        <footer>
    &copy; <time datetime="2020">2020</time> Jens Haase
    <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;legal&#x2F;disclosure&#x2F;">Legal Disclosure</a> | <a href="https:&#x2F;&#x2F;phel-lang.org&#x2F;legal&#x2F;data-protection&#x2F;">Data protection</a>
</footer>
    </div>
</div>

</body>

</html>
